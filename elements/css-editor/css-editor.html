<link rel="import" href="code-mirror/code-mirror.html"/>

<dom-module id="css-editor">
    <template>
        <style>
            :host {
                display: inline-block;
                width: 300px;
                height: 100%;
            }
        </style>
        <div></div>
    </template>
    <script>
        Polymer({
            is: 'css-editor',
            properties: {
                cssCode: {
                    value: '',
                    type: String,
                    notify: true
                },
                codeMirror: {
                    type: Object
                }
            },
            ready: function() {
                setTimeout(()=>{
                    this.initCodeMirror();
                    this.bindCodeMirrorTextChangeEvent();
                }, 2000);
            },
            initCodeMirror: function() {
                this.codeMirror = CodeMirror(this.$$('div'), {
                    value: "/* Add Your CSS */\n.class-name: {\n\tleft: 10px; \n}",
                    mode:  "css",
                    lineWrapping: true,
                    lineNumbers: true,
                    theme: 'monokai'
                });
            },
            bindCodeMirrorTextChangeEvent: function() {
                this.codeMirror.on('change', (event)=>{
                    this.cssCode = event.doc.getValue();
                });
            }
        });
    </script>
</dom-module>